-- DROP TABLE IF EXISTS video_data CASCADE;

CREATE TABLE IF NOT EXISTS video_data (
    row_id SERIAL PRIMARY KEY,
    id TEXT UNIQUE NOT NULL,
    fetch_date TIMESTAMP,
    uploader TEXT,
    uploader_id TEXT,
    upload_date DATE,
    title TEXT,
    desc_text TEXT,
    category TEXT,
    tags TEXT,
    duration INTEGER,
    age_limit INTEGER,
    view_count BIGINT,
    like_count BIGINT,
    dislike_count BIGINT,
    average_rating REAL,
    allow_embed BOOLEAN,
    is_crawlable BOOLEAN,
    allow_sub_contrib BOOLEAN,
    is_live_content BOOLEAN,
    is_ads_enabled BOOLEAN,
    is_comments_enabled BOOLEAN,
    formats JSONB,
    credits JSONB,
    regions_allowed TEXT,
    recommended_videos JSONB,
    headline_badges JSONB,
    unavailable_message TEXT,
    license TEXT,
    view_like_ratio REAL,
    view_dislike_ratio REAL,
    like_dislike_ratio REAL,
    dislike_like_ratio DECIMAL GENERATED ALWAYS AS ((CAST(dislike_count AS DECIMAL)+1.00) / (CAST(like_count AS DECIMAL)+1.00)) STORED
    );